<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./libs/mindar/mindar-image-three.prod.js"></script>
    <style>
      html, body {position: relative; margin: 0; width: 100%; height: 100%; overflow: hidden}
    </style>
  </head>
  <body>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        console.log("DOM is fully loaded");

        const start = async () => {
          console.log("Start function called");

          // initialize MindAR
          const mindarThree = new window.MINDAR.IMAGE.MindARThree({
            container: document.body,
            imageTargetSrc: './textures/unfoldingQR.mind',
          });
          console.log("MindAR initialized");

          const { renderer, scene, camera } = mindarThree;

          // preload images
          const imagesTotal = 16;
          const imageNum = Array.from({ length: imagesTotal }, (value, index) => index.toString());

          const textureLoader = new THREE.TextureLoader();
          const textures = [];

          for (let i = 0; i < imageNum.length; i++) {
            const texture = textureLoader.load(`./textures/image${imageNum[i]}.jpg`);
            textures.push(texture);
          }
          console.log("Textures preloaded");

          // ... (rest of your code)

          console.log("Start AR");
          // start AR
          await mindarThree.start();
          console.log("AR started");
          renderer.setAnimationLoop(() => {
            // ... (rest of your code)
            console.log("Rendering loop");
          });
        }
        start();
      });
    </script>
  </body>
</html>
